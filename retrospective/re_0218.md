
## 리뷰
### 작업 전 목표
1. 파이프라인 기능 완성 O
2. Spark 최적화 방향 잡고 시작 O
3. 처리-적재 과정에서 스키마 유효성 검증 전략 세우기 X
4. 대시보드 작성 △
### Redshift 키 관리 전략/패턴
- {source_name}-{post_id}-{car_name}
- OLTP처럼 엄격하게 Primary 키 관리를 하는게 맞을까?
	- WORM이라고 한다면 Key가 뭐가 중요하지?
	- ID로 어떤 값을 쓸 지 고민하기전에 ID가 필요한 상황이 무엇인지 먼저 생각하자.
- 증분 적재?
### MWAA + Secrets Backend
[Configuring an Apache Airflow connection using a AWS Secrets Manager secret](https://docs.aws.amazon.com/mwaa/latest/userguide/connections-secrets-manager.html)
- Role에 SecretsManagerReadWrite 권한 등록
- MWAA Configuration에 secrets.backed 설정 변경
- 보안성은 지금 높은 우선순위를 갖는 이슈인가?
	- 아니다. 학습하고 마련해야 할 근거가 많다.
### Classify 성능 이슈
- 로컬 성능: Call 한번에 1초
- Cloud 환경: Call 한번에 *8초*
	- 최적화 지점 분석 필요
### Redshift Task 리팩토링
- 이슈
	1. S3 경로 한글 문제
	2. 컬럼 순서/이름 및 타입 문제
- Airflow variables를 이용해 동적으로 적재 Task를 관리할 수 있도록 리팩토링한다.
### DW 스키마 관리 및 정합성/일관성 관리
- 아직 답을 못찾았다.
- 무작정 자료를 모아두다가 작업에 진전이 없는 것 같아 일단 후순위로 밀어둔다.
- 실제로 챌린지를 겪기 전에 툭하고 떠올릴 수 있는 답일까?
### 대시보드
- Rader chart 그리기가 너무 어렵다.
	1. 태블로가 어렵다.
	2. 데이터의 특성/테이블의 특성을 잘 몰라 그래프를 못그린다.
		1. 피벗 테이블 등
### 프로토타이핑
- 그랜저 CN7 및 6세대 사례 분석
	- 부정적인 초기 평가와 다르게 시간이 지날수록 긍정적인 평가가 늘었다는 사례가 있었다. 파이프라인에도 영향을 줄 수 있는 사실이다.
## 회고
### KEEP
- 미션을 풀 때와 다르게 프로젝트를 시작하면서 시급해보이는 요구사항이 많아진다. 팀원이 모두 우선순위를 공유해야한다.
	- 보안은 중요한 문제지만 시급한 문제는 아니다. 찝찝할 때도 있지만 체크만 해두고 넘어가야한다.
- 다른 동료가 해결하지 못하던 문제를 돕고 함께 하자.
	- 설정을 분명 했는데 Spark Out of memory가 발생한다?
		1. 은태님이 예전 미션 중에 공유해주신 이슈와 연관이 있어보였다.
		2. 상황으로 미루어보아 코드 문제가 아니고 실행 환경의 문제가 분명했다.
		3. Spark 세션 생성 시 driver 메모리를 설정하면 의도대로 동작하지 않을 수 있다. spark-submit 시 --conf 옵션을 직접 지정해야 한다.
			1. 경험 + 지식으로 원인과 해결 방법을 찾았고 지식을 확장할 수 있도록 이유를 알아야 한다.
	- 태블로를 가장 먼저 도입했는데 관련해서 여러 도움을 줄 수 있었다.
### PROBLEM
- 구체적인 일정관리와 우선순위 설정이 중요하다는 것을 느꼈지만, 같은 하루에서도 어떤 작업은 손절이 잘되고 어떤 작업은 붙잡게 된다. 왜 그랬을까?
	1. 별 생각없이 조금 수정하고 반영하는 작업을 반복하면서 시간을 흘려가는 케이스
		1. 시간을 정해두고 목표한 시간이 지나면 잠깐 환기를 하자. 생각이 정리될 것이다.
	2. 조금만 더 하면 해결할 수 있을 것 같은 욕심이 드는 케이스
		1. 5분이라도 예상 비용을 계산해보자. 그리고 다른 시급한 일은 무엇이었는지 되돌아보자.
	3. 중요한 일과 시급한 일을 혼동하는 케이스
		1. 가장 위험하다. 중요한 일을 하고 있다고 생각하지만, 막상 일정이 지나고 나면 진전이 없어보인다.
		2. 혼자서 깨기는 어려울 때도 있다. 팀원과 고민을 공유하고 나면 시각이 달라지는 경우가 있었다.
### TRY
- 오늘 Problem에 적은 배움을 잊지말고 1. 모니터링 계획을 세운다. 2. 모니터링 방안을 마련하자.